(this["webpackJsonppwa-birdifier"]=this["webpackJsonppwa-birdifier"]||[]).push([[0],{444:function(e,n,t){},452:function(e,n){},453:function(e,n){},461:function(e,n){},463:function(e,n){},464:function(e,n){},596:function(e,n,t){"use strict";t.r(n);var A,E,R=t(11),O=t.n(R),i=t(218),a=t.n(i),c=(t(444),t(173)),r=t(174),I=r.a.div(A||(A=Object(c.a)(["\n\tfont-size: 10px;   /*1rem = 10px*/\n  background-color: #FAFAFF;\n  min-height:100vh;\n  max-width: 100%;\n  overflow-x: hidden;\n\n  color: #273469; \n\n  display: flex;\n  flex-direction: column;\n"]))),N=r.a.div(E||(E=Object(c.a)(["\n  padding: 1.4rem 0;\n  align-self: center;\n  flex-shrink: 2;\n  @media(min-width: 1024px) {\n    align-self: auto;\n  }\n\n  h1 {\n    margin-left: 1.4rem;\n    font-size: 2rem;\n    \n  }\n"]))),o=t(43);var L,s=function(){return Object(o.jsx)(N,{children:Object(o.jsx)("h1",{children:"PWA Birdifier"})})},l=t(3),T=t.n(l),C=t(20),D=t(12),d=t(5),u=t(208),S=r.a.div(L||(L=Object(c.a)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  min-height: 100%;\n  width: 100%;\n\n  div {\n    flex: 1;\n  }\n\n  @media(min-width: 1024px) {\n    width: 40rem;\n    margin:0 auto;\n  }\n\n  .currentImage {\n    display: flex;\n  }\n\n  .currentImage img {\n    height: auto;\n    width: 100%;\n    align-self: flex-end;\n  }\n\n  .btn-group {\n    flex-grow: 0;\n  }\n\n  .btn-group button {\n    width: 33.3%;\n    border: 1px solid #FAFAFF;\n    padding: 15px 24px; \n    @media(max-width: 350px) {\n      padding: 10px 10px;\n    }\n  }\n\n  .btn-group button:not(:last-child) {\n    border-right: none;\n  }\n\n  button, input > button {\n    background-color: #8884d8;\n    cursor: pointer;\n    color: #FAFAFF;\n    font-family: inherit;\n  }\n"]))),B=t.p+"static/media/bald-eagle-preloaded-v2.8155ad7c.jpg",f=t(602),U=t(413),p=t(73),b=t(271);var P=function(e){var n=e.classifications;return Object(o.jsxs)("div",{style:{backgroundColor:"#273469",textAlign:"center",display:"flex",flexDirection:" column",justifyContent:"space-around",alignItems:"center"},children:[Object(o.jsxs)(f.a,{width:400,height:400,onClick:function(){},children:[Object(o.jsx)(U.a,{dataKey:"value",isAnimationActive:!0,data:n,cx:200,cy:200,outerRadius:65,fill:"#8884d8",label:function(e){var t=e.cx,A=e.cy,E=e.midAngle,R=e.innerRadius,O=e.outerRadius,i=e.value,a=e.index,c=Math.PI/180,r=25+R+(O-R),I=t+r*Math.cos(-E*c),N=A+r*Math.sin(-E*c);return Object(o.jsxs)("text",{x:I,y:N,fill:"#8884d8",textAnchor:I>t?"start":"end",dominantBaseline:"central",children:[n[a].name," (",i,")"]})}}),Object(o.jsx)(p.a,{value:"Detection confidence / %",offset:0,position:"insideBottom"}),Object(o.jsx)(b.a,{})]}),Object(o.jsx)("h2",{style:{alignSelf:"center",color:"#FAFAFF"},children:"Detection confidence / %"})]})},j=t(410),G=(t(595),t.p+"static/media/bald-eagle-preloaded-with-text.6e8412b5.jpg");var x=function(e){var n=Object(R.useState)(G),t=Object(d.a)(n,2),A=t[0],E=t[1],O=Object(R.useState)(),i=Object(d.a)(O,2),a=i[0],c=i[1],r=Object(R.useRef)(null);return Object(o.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(o.jsx)(j.a,{style:{alignSelf:"flex-end",width:"100%"},initialAspectRatio:1,src:A,viewMode:1,guides:!0,minCropBoxHeight:10,minCropBoxWidth:10,responsive:!0,background:!1,autoCropArea:1,checkOrientation:!1,onInitialized:function(e){c(e)}}),Object(o.jsx)("input",{style:{display:"none"},ref:r,type:"file",onChange:function(e){var n;e.preventDefault(),e.dataTransfer?n=e.dataTransfer.files:e.target&&(n=e.target.files);var t=new FileReader;t.onload=function(){E(t.result)},t.readAsDataURL(n[0])}}),Object(o.jsxs)("div",{id:"crop",className:"btn-group",children:[Object(o.jsx)("button",{onClick:function(){return e.setSelectImage(!1)},children:"Cancel"}),Object(o.jsx)("button",{onClick:function(){return r.current.click()},children:"Browse"}),Object(o.jsx)("button",{onClick:function(){"/static/media/bald-eagle-preloaded-with-text.6e8412b5.jpg"===A?alert("Preloaded image cannot be cropped"):"undefined"!==typeof a&&(e.setImgSrc(a.getCroppedCanvas().toDataURL()),e.setSelectImage(!1))},children:"Crop"})]})]})},H={"AFRICAN CROWNED CRANE":0,"AFRICAN FIREFINCH":1,ALBATROSS:2,"ALEXANDRINE PARAKEET":3,"AMERICAN AVOCET":4,"AMERICAN BITTERN":5,"AMERICAN COOT":6,"AMERICAN GOLDFINCH":7,"AMERICAN KESTREL":8,"AMERICAN PIPIT":9,"AMERICAN REDSTART":10,ANHINGA:11,"ANNAS HUMMINGBIRD":12,ANTBIRD:13,"ARARIPE MANAKIN":14,"ASIAN CRESTED IBIS":15,"BALD EAGLE":16,"BALI STARLING":17,"BALTIMORE ORIOLE":18,BANANAQUIT:19,"BANDED BROADBILL":20,"BAR-TAILED GODWIT":21,"BARN OWL":22,"BARN SWALLOW":23,"BARRED PUFFBIRD":24,"BAY-BREASTED WARBLER":25,"BEARDED BARBET":26,"BELTED KINGFISHER":27,"BIRD OF PARADISE":28,"BLACK FRANCOLIN":29,"BLACK SKIMMER":30,"BLACK SWAN":31,"BLACK THROATED WARBLER":32,"BLACK VULTURE":33,"BLACK-CAPPED CHICKADEE":34,"BLACK-NECKED GREBE":35,"BLACK-THROATED SPARROW":36,"BLACKBURNIAM WARBLER":37,"BLUE GROUSE":38,"BLUE HERON":39,BOBOLINK:40,"BROWN NOODY":41,"BROWN THRASHER":42,"CACTUS WREN":43,"CALIFORNIA CONDOR":44,"CALIFORNIA GULL":45,"CALIFORNIA QUAIL":46,CANARY:47,"CAPE MAY WARBLER":48,CAPUCHINBIRD:49,"CARMINE BEE-EATER":50,"CASPIAN TERN":51,CASSOWARY:52,"CHARA DE COLLAR":53,"CHIPPING SPARROW":54,"CHUKAR PARTRIDGE":55,"CINNAMON TEAL":56,"COCK OF THE  ROCK":57,COCKATOO:58,"COMMON FIRECREST":59,"COMMON GRACKLE":60,"COMMON HOUSE MARTIN":61,"COMMON LOON":62,"COMMON POORWILL":63,"COMMON STARLING":64,"COUCHS KINGBIRD":65,"CRESTED AUKLET":66,"CRESTED CARACARA":67,"CRESTED NUTHATCH":68,CROW:69,"CROWNED PIGEON":70,"CUBAN TODY":71,"CURL CRESTED ARACURI":72,"D-ARNAUDS BARBET":73,"DARK EYED JUNCO":74,"DOWNY WOODPECKER":75,"EASTERN BLUEBIRD":76,"EASTERN MEADOWLARK":77,"EASTERN ROSELLA":78,"EASTERN TOWEE":79,"ELEGANT TROGON":80,"ELLIOTS  PHEASANT":81,"EMPEROR PENGUIN":82,EMU:83,"EURASIAN GOLDEN ORIOLE":84,"EURASIAN MAGPIE":85,"EVENING GROSBEAK":86,"FIRE TAILLED MYZORNIS":87,"FLAME TANAGER":88,FLAMINGO:89,FRIGATE:90,"GAMBELS QUAIL":91,"GILA WOODPECKER":92,"GILDED FLICKER":93,"GLOSSY IBIS":94,"GO AWAY BIRD":95,"GOLD WING WARBLER":96,"GOLDEN CHEEKED WARBLER":97,"GOLDEN CHLOROPHONIA":98,"GOLDEN EAGLE":99,"GOLDEN PHEASANT":100,"GOLDEN PIPIT":101,"GOULDIAN FINCH":102,"GRAY CATBIRD":103,"GRAY PARTRIDGE":104,"GREAT POTOO":105,"GREATOR SAGE GROUSE":106,"GREEN JAY":107,"GREY PLOVER":108,"GUINEA TURACO":109,GUINEAFOWL:110,GYRFALCON:111,"HARPY EAGLE":112,"HAWAIIAN GOOSE":113,"HELMET VANGA":114,HOATZIN:115,"HOODED MERGANSER":116,HOOPOES:117,HORNBILL:118,"HORNED GUAN":119,"HORNED SUNGEM":120,"HOUSE FINCH":121,"HOUSE SPARROW":122,"IMPERIAL SHAQ":123,"INCA TERN":124,"INDIAN BUSTARD":125,"INDIAN PITTA":126,"INDIGO BUNTING":127,JABIRU:128,"JAVA SPARROW":129,"JAVAN MAGPIE":130,KAKAPO:131,KILLDEAR:132,"KING VULTURE":133,KIWI:134,KOOKABURRA:135,"LARK BUNTING":136,"LEARS MACAW":137,"LILAC ROLLER":138,"LONG-EARED OWL":139,"MALABAR HORNBILL":140,"MALACHITE KINGFISHER":141,MALEO:142,"MALLARD DUCK":143,"MANDRIN DUCK":144,"MARABOU STORK":145,"MASKED BOOBY":146,"MASKED LAPWING":147,"MIKADO  PHEASANT":148,"MOURNING DOVE":149,MYNA:150,"NICOBAR PIGEON":151,"NORTHERN BALD IBIS":152,"NORTHERN CARDINAL":153,"NORTHERN FLICKER":154,"NORTHERN GANNET":155,"NORTHERN GOSHAWK":156,"NORTHERN JACANA":157,"NORTHERN MOCKINGBIRD":158,"NORTHERN PARULA":159,"NORTHERN RED BISHOP":160,"OCELLATED TURKEY":161,"OKINAWA RAIL":162,OSPREY:163,OSTRICH:164,"OYSTER CATCHER":165,"PAINTED BUNTIG":166,PALILA:167,"PARADISE TANAGER":168,"PARUS MAJOR":169,PEACOCK:170,PELICAN:171,"PEREGRINE FALCON":172,"PHILIPPINE EAGLE":173,"PINK ROBIN":174,PUFFIN:175,"PURPLE FINCH":176,"PURPLE GALLINULE":177,"PURPLE MARTIN":178,"PURPLE SWAMPHEN":179,QUETZAL:180,"RAINBOW LORIKEET":181,RAZORBILL:182,"RED BEARDED BEE EATER":183,"RED BELLIED PITTA":184,"RED FACED CORMORANT":185,"RED FACED WARBLER":186,"RED HEADED DUCK":187,"RED HEADED WOODPECKER":188,"RED HONEY CREEPER":189,"RED WINGED BLACKBIRD":190,"RED WISKERED BULBUL":191,"RING-NECKED PHEASANT":192,ROADRUNNER:193,ROBIN:194,"ROCK DOVE":195,"ROSY FACED LOVEBIRD":196,"ROUGH LEG BUZZARD":197,"RUBY THROATED HUMMINGBIRD":198,"RUFOUS KINGFISHER":199,"RUFUOS MOTMOT":200,"SAMATRAN THRUSH":201,"SAND MARTIN":202,"SCARLET IBIS":203,"SCARLET MACAW":204,SHOEBILL:205,"SHORT BILLED DOWITCHER":206,"SMITHS LONGSPUR":207,"SNOWY EGRET":208,"SNOWY OWL":209,SORA:210,"SPANGLED COTINGA":211,"SPLENDID WREN":212,"SPOON BILED SANDPIPER":213,SPOONBILL:214,"SRI LANKA BLUE MAGPIE":215,"STEAMER DUCK":216,"STORK BILLED KINGFISHER":217,"STRAWBERRY FINCH":218,"STRIPPED SWALLOW":219,"SUPERB STARLING":220,"SWINHOES PHEASANT":221,"TAIWAN MAGPIE":222,TAKAHE:223,"TASMANIAN HEN":224,"TEAL DUCK":225,"TIT MOUSE":226,TOUCHAN:227,"TOWNSENDS WARBLER":228,"TREE SWALLOW":229,"TRUMPTER SWAN":230,"TURKEY VULTURE":231,"TURQUOISE MOTMOT":232,"UMBRELLA BIRD":233,"VARIED THRUSH":234,"VENEZUELIAN TROUPIAL":235,"VERMILION FLYCATHER":236,"VIOLET GREEN SWALLOW":237,"VULTURINE GUINEAFOWL":238,"WATTLED CURASSOW":239,WHIMBREL:240,"WHITE CHEEKED TURACO":241,"WHITE NECKED RAVEN":242,"WHITE TAILED TROPIC":243,"WILD TURKEY":244,"WILSONS BIRD OF PARADISE":245,"WOOD DUCK":246,"YELLOW BELLIED FLOWERPECKER":247,"YELLOW CACIQUE":248,"YELLOW HEADED BLACKBIRD":249};var M=function(){var e=Object(R.useState)([{name:"Bald Eagle",value:90},{name:"Golden Eagle",value:7},{name:"Turkey Vulture",value:3}]),n=Object(d.a)(e,2),t=n[0],A=n[1],E=Object(R.useState)(!1),O=Object(d.a)(E,2),i=O[0],a=O[1],c=Object(R.useState)(!1),r=Object(d.a)(c,2),I=r[0],N=r[1],L=Object(R.useState)(B),s=Object(d.a)(L,2),l=s[0],f=s[1],U=Object(R.useState)(null),p=Object(d.a)(U,2),b=p[0],j=p[1],G="/tfjs_files/model.json",M=Object.keys(H);function h(e){return W.apply(this,arguments)}function W(){return(W=Object(D.a)(T.a.mark((function e(n){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=3;break}return e.next=3,n.save("indexeddb://my-model");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return(K=Object(D.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=j,e.next=4,u.c("indexeddb://my-model");case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=10;break;case 8:e.prev=8,e.t2=e.catch(0);case 10:return e.prev=10,e.t3=j,e.next=14,u.c(G);case 14:return e.t4=e.sent,(0,e.t3)(e.t4),window.indexedDB&&h(b),e.finish(10);case 18:case"end":return e.stop()}}),e,null,[[0,8,10,18]])})))).apply(this,arguments)}function m(e){return e.expandDims(0).toFloat().div(127).sub(1)}function g(e){return u.b.resizeBilinear(e,[224,224])}function F(e){for(var n=[],t=0;t<e.length;t++)n.push({species:M[t],prediction:e[t]});var E=e.indexOf(Math.max.apply(Math,Object(C.a)(e)));e[E]=0;var R=e.indexOf(Math.max.apply(Math,Object(C.a)(e)));e[R]=0;var O=e.indexOf(Math.max.apply(Math,Object(C.a)(e))),i=[{name:n[E].species,value:100*n[E].prediction},{name:n[R].species,value:100*n[R].prediction},{name:n[O].species,value:100*n[O].prediction}];console.log(i),A(i)}Object(R.useEffect)((function(){!function(){K.apply(this,arguments)}()}),[]);var v=function(){var e=Object(D.a)(T.a.mark((function e(){var n,t,A,E,R;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==I){e.next=12;break}return(n=new Image).src=l,t=u.a.fromPixels(n),A=g(t),E=m(A),R=b.predict(E),e.next=9,R.data();case 9:F(e.sent),a(!0);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.jsxs)(S,{children:[!0===i?Object(o.jsx)(P,{classifications:t}):null,!0===I?Object(o.jsx)(x,{setSelectImage:N,setImgSrc:f}):Object(o.jsx)("div",{className:"currentImage",children:Object(o.jsx)("img",{src:l})}),Object(o.jsxs)("div",{className:"btn-group",children:[Object(o.jsx)("button",{onClick:function(){return i&&a(!1),N(!0)},children:"Select file"}),Object(o.jsx)("button",{onClick:function(){return a(!1)},children:"Take photo"}),Object(o.jsx)("button",{onClick:function(){return v()},children:"Classify"})]})]})};var h=function(){return Object(R.useEffect)((function(){document.title="PWA Birdifier"}),[]),Object(o.jsxs)(I,{children:[Object(o.jsx)(s,{}),Object(o.jsx)(M,{})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,603)).then((function(n){var t=n.getCLS,A=n.getFID,E=n.getFCP,R=n.getLCP,O=n.getTTFB;t(e),A(e),E(e),R(e),O(e)}))};a.a.render(Object(o.jsx)(O.a.StrictMode,{children:Object(o.jsx)(h,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),W()}},[[596,1,2]]]);
//# sourceMappingURL=main.81c3676a.chunk.js.map